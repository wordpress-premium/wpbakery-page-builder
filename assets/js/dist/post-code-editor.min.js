(e=>{_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"",mode:"",is_focused:!1,ace_enabled:!1,initialize:function(t){t&&0<t.length&&(this.sel=t),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(t){if(!this.missingUnfilteredHtml())return this.aceEnabled()?this.setEditorAce(t):this.setEditorTextarea(t),this.$editor},missingUnfilteredHtml:function(){return e("#"+this.sel).hasClass("wpb_missing_unfiltered_html")},focus:function(){var t;this.is_focused&&(this.aceEnabled()?(this.$editor.focus(),t=this.$editor.session.getLength(),this.$editor.gotoLine(t,this.$editor.session.getLine(t-1).length)):this.$editor.focus())},setEditorAce:function(t){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/"+this.mode),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(t),this.$editor.clearSelection(),this.is_focused&&this.$editor.focus();t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.is_focused&&this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t=e("#"+this.sel);this.aceEnabled()?t.css({height:"30vh",minHeight:"30vh"}):(this.$editor.parent().css({height:"30vh",minHeight:"30vh"}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})})(window.jQuery);